<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hjalmar Samuel Kristensen-Karlsen</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <header>
        <h1>Hjalmar Samuel Kristensen-Karlsen</h1>
        <p>Utvikler og student</p>
    </header>
    
    <main>
        <section class="about">
            <h2>Om meg</h2>
            <p><span class="highlight-name">Jeg heter Hjalmar</span>, er 18 år og jobber på Coop Extra Gakori. Jeg lagde denne lønnskalkulatoren fordi jeg ble lei av å regne ut lønna mi for hånd hver måned. Nå slipper både jeg og du å sitte med kalkulator og frustrasjon – bare legg inn vaktene dine, så fikser nettsida resten.</p>
        </section>
        
        <section class="projects">
            <h2>Prosjekter</h2>
            <div class="project-card">
                <h3>Lønnskalkulator</h3>
                <p>En webapplikasjon for å regne ut månedslønn basert på vakter, arbeidstid og tariffbasert timelønn.</p>
                <a href="/kalkulator" class="btn">Åpne kalkulator</a>
            </div>
        </section>

        <section class="bugs">
            <h2>Kjente bugs</h2>
            <div class="bug-list">
                <div class="bug-card">
                    <h4>To faktor autentisering</h4>
                    <p>Du får lagt til en epost ved registrering og må bekrefte denne, men du kan ikke bruke denne til MFA senere. Jobber med å implementere dette.</p>
                </div>

            </div>
        </section>
    </main>
    
    <footer>
        <p>&copy; 2025 Hjalmar Samuel Kristensen-Karlsen</p>
    </footer>
    
    <!-- Handle password recovery redirects -->
    <script>
        // Check if this is a password recovery redirect from Supabase
        const hashFragment = window.location.hash;
        const searchParams = window.location.search;
        const urlParams = new URLSearchParams(searchParams);
        const fullUrl = window.location.href;
        
        console.log('Checking for recovery tokens...');
        console.log('Hash:', hashFragment);
        console.log('Search:', searchParams);
        console.log('Full URL:', fullUrl);
        
        // Check for recovery tokens in either hash fragment or query parameters
        const hasRecoveryInHash = hashFragment.includes('access_token') && hashFragment.includes('type=recovery');
        const hasRecoveryInSearch = searchParams.includes('access_token') && searchParams.includes('type=recovery');
        const hasLegacyRecovery = urlParams.has('token') && urlParams.get('type') === 'recovery';
        
        if (hasRecoveryInHash || hasRecoveryInSearch || hasLegacyRecovery) {
            console.log('Recovery tokens detected, redirecting to kalkulator...');
            // Redirect to the kalkulator page with the recovery tokens
            if (hasRecoveryInHash) {
                window.location.href = '/kalkulator/index.html' + hashFragment;
            } else if (hasRecoveryInSearch) {
                window.location.href = '/kalkulator/index.html' + searchParams;
            } else if (hasLegacyRecovery) {
                window.location.href = '/kalkulator/index.html' + searchParams;
            }
        }
    </script>
</body>
</html>